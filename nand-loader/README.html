<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
    "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="generator" content="AsciiDoc 8.4.5" />
<title>BR UID</title>
<style type="text/css">
/* Debug borders */
p, li, dt, dd, div, pre, h1, h2, h3, h4, h5, h6 {
/*
  border: 1px solid red;
*/
}

body {
  margin: 1em 5% 1em 5%;
}

a {
  color: blue;
  text-decoration: underline;
}
a:visited {
  color: fuchsia;
}

em {
  font-style: italic;
  color: navy;
}

strong {
  font-weight: bold;
  color: #083194;
}

tt {
  color: navy;
}

h1, h2, h3, h4, h5, h6 {
  color: #527bbd;
  font-family: sans-serif;
  margin-top: 1.2em;
  margin-bottom: 0.5em;
  line-height: 1.3;
}

h1, h2, h3 {
  border-bottom: 2px solid silver;
}
h2 {
  padding-top: 0.5em;
}
h3 {
  float: left;
}
h3 + * {
  clear: left;
}

div.sectionbody {
  font-family: serif;
  margin-left: 0;
}

hr {
  border: 1px solid silver;
}

p {
  margin-top: 0.5em;
  margin-bottom: 0.5em;
}

ul, ol, li > p {
  margin-top: 0;
}

pre {
  padding: 0;
  margin: 0;
}

span#author {
  color: #527bbd;
  font-family: sans-serif;
  font-weight: bold;
  font-size: 1.1em;
}
span#email {
}
span#revnumber, span#revdate, span#revremark {
  font-family: sans-serif;
}

div#footer {
  font-family: sans-serif;
  font-size: small;
  border-top: 2px solid silver;
  padding-top: 0.5em;
  margin-top: 4.0em;
}
div#footer-text {
  float: left;
  padding-bottom: 0.5em;
}
div#footer-badges {
  float: right;
  padding-bottom: 0.5em;
}

div#preamble {
  margin-top: 1.5em;
  margin-bottom: 1.5em;
}
div.tableblock, div.imageblock, div.exampleblock, div.verseblock,
div.quoteblock, div.literalblock, div.listingblock, div.sidebarblock,
div.admonitionblock {
  margin-top: 1.5em;
  margin-bottom: 1.5em;
}
div.admonitionblock {
  margin-top: 2.5em;
  margin-bottom: 2.5em;
}

div.content { /* Block element content. */
  padding: 0;
}

/* Block element titles. */
div.title, caption.title {
  color: #527bbd;
  font-family: sans-serif;
  font-weight: bold;
  text-align: left;
  margin-top: 1.0em;
  margin-bottom: 0.5em;
}
div.title + * {
  margin-top: 0;
}

td div.title:first-child {
  margin-top: 0.0em;
}
div.content div.title:first-child {
  margin-top: 0.0em;
}
div.content + div.title {
  margin-top: 0.0em;
}

div.sidebarblock > div.content {
  background: #ffffee;
  border: 1px solid silver;
  padding: 0.5em;
}

div.listingblock > div.content {
  border: 1px solid silver;
  background: #f4f4f4;
  padding: 0.5em;
}

div.quoteblock {
  padding-left: 2.0em;
  margin-right: 10%;
}
div.quoteblock > div.attribution {
  padding-top: 0.5em;
  text-align: right;
}

div.verseblock {
  padding-left: 2.0em;
  margin-right: 10%;
}
div.verseblock > div.content {
  white-space: pre;
}
div.verseblock > div.attribution {
  padding-top: 0.75em;
  text-align: left;
}
/* DEPRECATED: Pre version 8.2.7 verse style literal block. */
div.verseblock + div.attribution {
  text-align: left;
}

div.admonitionblock .icon {
  vertical-align: top;
  font-size: 1.1em;
  font-weight: bold;
  text-decoration: underline;
  color: #527bbd;
  padding-right: 0.5em;
}
div.admonitionblock td.content {
  padding-left: 0.5em;
  border-left: 2px solid silver;
}

div.exampleblock > div.content {
  border-left: 2px solid silver;
  padding: 0.5em;
}

div.imageblock div.content { padding-left: 0; }
span.image img { border-style: none; }
a.image:visited { color: white; }

dl {
  margin-top: 0.8em;
  margin-bottom: 0.8em;
}
dt {
  margin-top: 0.5em;
  margin-bottom: 0;
  font-style: normal;
  color: navy;
}
dd > *:first-child {
  margin-top: 0.1em;
}

ul, ol {
    list-style-position: outside;
}
ol.arabic {
  list-style-type: decimal;
}
ol.loweralpha {
  list-style-type: lower-alpha;
}
ol.upperalpha {
  list-style-type: upper-alpha;
}
ol.lowerroman {
  list-style-type: lower-roman;
}
ol.upperroman {
  list-style-type: upper-roman;
}

div.compact ul, div.compact ol,
div.compact p, div.compact p,
div.compact div, div.compact div {
  margin-top: 0.1em;
  margin-bottom: 0.1em;
}

div.tableblock > table {
  border: 3px solid #527bbd;
}
thead {
  font-family: sans-serif;
  font-weight: bold;
}
tfoot {
  font-weight: bold;
}
td > div.verse {
  white-space: pre;
}
p.table {
  margin-top: 0;
}
/* Because the table frame attribute is overriden by CSS in most browsers. */
div.tableblock > table[frame="void"] {
  border-style: none;
}
div.tableblock > table[frame="hsides"] {
  border-left-style: none;
  border-right-style: none;
}
div.tableblock > table[frame="vsides"] {
  border-top-style: none;
  border-bottom-style: none;
}


div.hdlist {
  margin-top: 0.8em;
  margin-bottom: 0.8em;
}
div.hdlist tr {
  padding-bottom: 15px;
}
dt.hdlist1.strong, td.hdlist1.strong {
  font-weight: bold;
}
td.hdlist1 {
  vertical-align: top;
  font-style: normal;
  padding-right: 0.8em;
  color: navy;
}
td.hdlist2 {
  vertical-align: top;
}
div.hdlist.compact tr {
  margin: 0;
  padding-bottom: 0;
}

.comment {
  background: yellow;
}

@media print {
  div#footer-badges { display: none; }
}

div#toctitle {
  color: #527bbd;
  font-family: sans-serif;
  font-size: 1.1em;
  font-weight: bold;
  margin-top: 1.0em;
  margin-bottom: 0.1em;
}

div.toclevel1, div.toclevel2, div.toclevel3, div.toclevel4 {
  margin-top: 0;
  margin-bottom: 0;
}
div.toclevel2 {
  margin-left: 2em;
  font-size: 0.9em;
}
div.toclevel3 {
  margin-left: 4em;
  font-size: 0.9em;
}
div.toclevel4 {
  margin-left: 6em;
  font-size: 0.9em;
}
/* Workarounds for IE6's broken and incomplete CSS2. */

div.sidebar-content {
  background: #ffffee;
  border: 1px solid silver;
  padding: 0.5em;
}
div.sidebar-title, div.image-title {
  color: #527bbd;
  font-family: sans-serif;
  font-weight: bold;
  margin-top: 0.0em;
  margin-bottom: 0.5em;
}

div.listingblock div.content {
  border: 1px solid silver;
  background: #f4f4f4;
  padding: 0.5em;
}

div.quoteblock-attribution {
  padding-top: 0.5em;
  text-align: right;
}

div.verseblock-content {
  white-space: pre;
}
div.verseblock-attribution {
  padding-top: 0.75em;
  text-align: left;
}

div.exampleblock-content {
  border-left: 2px solid silver;
  padding-left: 0.5em;
}

/* IE6 sets dynamically generated links as visited. */
div#toc a:visited { color: blue; }
</style>
</head>
<body>
<div id="header">
<h1>BR UID</h1>
</div>
<h2 id="_git_repositories">Git Repositories</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre><tt>git clone zbfxigop@www.rtems.eu:rtems.git git-rtems
git clone zbfxigop@www.rtems.eu:yaffs2.git git-yaffs2
git clone zbfxigop@www.rtems.eu:bed.git git-bed
git clone zbfxigop@www.rtems.eu:rtems-apps.git git-apps</tt></pre>
</div></div>
</div>
<h2 id="_rtems_installation">RTEMS Installation</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre><tt>cd ${ROOT}/git-rtems
git pull
./bootstrap
rm -rf ${ROOT}/b-rtems
cd ${ROOT}/b-rtems
${ROOT}/git-rtems/configure \
        --target=powerpc-rtems4.11 \
        --prefix=/opt/rtems-4.11 \
        --enable-rtemsbsp=br_uid \
        --enable-posix \
        --enable-maintainer-mode
make
make install</tt></pre>
</div></div>
</div>
<h2 id="_library_installation">Library Installation</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre><tt>cd ${ROOT}/git-yaffs2
git pull
make clean install
cd ${ROOT}/git-bed
git pull
make clean install
cd ${ROOT}/git-apps/quicc
git pull
make clean install</tt></pre>
</div></div>
</div>
<h2 id="_flash_partitions">Flash Partitions</h2>
<div class="sectionbody">
<div class="tableblock">
<table rules="all"
width="100%"
frame="hsides"
cellspacing="0" cellpadding="4">
<caption class="title">Flash Partitions</caption>
<col width="16%" />
<col width="16%" />
<col width="16%" />
<col width="50%" />
<thead>
<tr>
<th align="right" valign="top"> Start Block </th>
<th align="right" valign="top"> Block Count </th>
<th align="right" valign="top"> Size   </th>
<th align="left" valign="top"> Usage</th>
</tr>
</thead>
<tbody>
<tr>
<td align="right" valign="top"><p class="table">0</p></td>
<td align="right" valign="top"><p class="table">32</p></td>
<td align="right" valign="top"><p class="table">4MiB</p></td>
<td align="left" valign="top"><p class="table">Stage-1 program (sequential with bad block skip)</p></td>
</tr>
<tr>
<td align="right" valign="top"><p class="table">32</p></td>
<td align="right" valign="top"><p class="table">1984</p></td>
<td align="right" valign="top"><p class="table">248MiB</p></td>
<td align="left" valign="top"><p class="table">Flash file system (YAFFS2)</p></td>
</tr>
<tr>
<td align="right" valign="top"><p class="table">1984</p></td>
<td align="right" valign="top"><p class="table">32</p></td>
<td align="right" valign="top"><p class="table">4MiB</p></td>
<td align="left" valign="top"><p class="table">Reserved</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<h2 id="_stage_1_nand_boot_loader">Stage-1 (NAND Boot Loader)</h2>
<div class="sectionbody">
<div class="paragraph"><p>The stage-1 boot loader is started by the MPC8309 boot sequencer provided a
valid RCW is stored in the first 4KiB of a NAND flash block.  The initial start
code must fit into a 4KiB area.  This initial start code initializes the DDR
RAM, relocates itself to the RAM and loads the remaining content of its
program.  After the basic initialization RTEMS is started.</p></div>
<div class="paragraph"><p>The high-level stage-1 part will try to mount the flash file system.  In case
this is successful it tries to read the <tt>/ffs/br_uid.ini</tt> configuration file.</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>[boot]
timeout_in_seconds = 3

[file]
image_path = /ffs/br_uid.bin

[network]
mac_address = 0e:b0:ba:5e:ba:11
ip_self = 192.168.100.50
ip_gateway = 192.168.100.254
ip_netmask = 255.255.255.0

[nfs]
server_path = 1000.100@192.168.96.64:/scratch/nfs
image_path = /nfs/br_uid.bin</tt></pre>
</div></div>
<div class="paragraph"><p>All values are optional and in case something is missing default values will be
used (presented in the listing above).  Once the timeout expired without user
input the automatic application load sequence starts.  In case a valid <em>file</em>
section is present in the configuration file this image will be started.  In
case a valid <em>nfs</em> section is present in the configuration file this image will
be started.  If both sections are present, then the image of the <em>file</em> section
has priority.</p></div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2013-03-26 11:11:55 CEST
</div>
</div>
</body>
</html>
